<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="most opinionated blog"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="devthewild" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>devthewild</title>
<link rel="stylesheet" href="/css/main.css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><meta name="generator" content="Hexo 5.4.0"></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">devthewild</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2014-06-27T15:00:00.000Z" class="post__time">June 28, 2014</time><h1 class="post__title"><a href="/2014/06/28/v8-optimization-killers/">V8 Optimization killers</a></h1></header><div class="post__main echo"><blockquote>
<h3>Translation of &quot;<a target="_blank" rel="noopener" href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers">Optimization killers</a>&quot; into Korean, under the same license as the original.</h3>
</blockquote>
<h3>도입</h3>
<p>이 문서는 예상보다 훨씬 성능이 떨어지는 코딩을 피하기 위한 조언이 포함되어 있다. 특히 V8(nodejs, Opera, Chromium 등)에서 최적화를 방해하는 패턴에 대한 것이다.</p>
<h3>V8 배경지식 약간</h3>
<p>V8에서는 인터프리터가 없고 2가지 컴파일러가 있다, 일반 컴파일러(generic)와 최적화 컴파일러(optimizing).
즉, JavaScript 코드를 항상 컴파일하고 네이티브로 직접 실행한다는 뜻이다. 이는 빠르다는 뜻이다, 정말? 아니다. 네이티브로 컴파일된 코드라고 해서 성능적으로 큰 의미가 있는 것은 아니다. 단지 인터프리터 과부하를 제거한 것이라 최적화되지 않은 코드는 여전히 느리게 돌아간다.</p>
<p>예를 들어, 일반 컴파일러로 <code>a + b</code>는 다음과 같다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov eax, a  </span><br><span class="line">mov ebx, b  </span><br><span class="line">call RuntimeAdd  </span><br></pre></td></tr></table></figure>
<p>위에서 보면 단지 런타임 함수를 호출한다. <code>a</code>와 <code>b</code>가 항상 정수라면 다음과 같이 된다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mov eax, a  </span><br><span class="line">mov ebx, b  </span><br><span class="line">add eax, ebx  </span><br></pre></td></tr></table></figure>
<p>런타임에서 복잡한 의미가 추가된 스크립트보다 훨씬 빠르게 작동할 것이다.</p>
<p>전자는 일 컴파일러에서 나오는 코드고, 후자는 최적화 컴파일러에서 나오는 코드다. 최적화 컴파일러로 컴파일된 코드는 대충 일반 컴파일러로 생성한 것보다 100배쯤 빠르다. 여기서 잠깐, 그냥 JavaScript로 코딩한다고 최적화된다는 것은 아니다. 많은 패턴들이 있는데, 최적화 컴파일러가 건들지 못하는 관용적인 것들이 있다.</p>
<p>중요한 점은, 이렇게 최적화 제외 코드는 그 함수를 포함하는 전체에 영향을 준다는 것이다. 코드는 한번에 한 함수만 최적화가 되고, 다른 코드가 무엇을 하든 전혀 모르고 있다(현재 최적화하고 있는 함수 내에 인라인된 코드가 아니라면).</p>
<p>이 가이드는 &quot;비최적화&quot;의 함수를 포함해 대부분의 패턴을 다룬다. 최적화 컴파일러가 더 많은 패턴을 인식할 수 있도록 업데이트 될 때 이런 우회 방법들은 불필요해질 것이다.</p>
<p>(본문은 요약)</p>
<h3>주제</h3>
<ol>
<li><a href="#1-_%ED%88%B4%EB%A7%81">툴링</a></li>
<li><a href="#2-_%EB%AF%B8%EC%A7%80%EC%9B%90_%EB%AC%B8%EB%B2%95">미지원 문법</a></li>
<li><a href="#3-_arguments_%EA%B4%80%EB%A6%AC"><code>arguments</code> 관리</a></li>
<li><a href="#4-_switch-case">switch-case</a></li>
<li><a href="#5-_for-in">for-in</a></li>
</ol>
<h3>1. 툴링</h3>
<p>최적화에 영향을 주는지 알아보기 위해 V8의 내부에서 사용하는 플래그를 사용할 수 있다.</p>
<p>HackerNews의 댓글을 보면 플래그 등에 대한 <a target="_blank" rel="noopener" href="https://news.ycombinator.com/item?id=7943303">추가 설명</a>이 있고, DailyJS.com에서 <a target="_blank" rel="noopener" href="http://dailyjs.com/2014/06/26/optimization-killers/">요약</a>되어있다.</p>
<h3>2. 미지원 문법</h3>
<p>현재까진 최적화되지 않는 문법</p>
<ul>
<li>제너레이터 함수</li>
<li>for-of를 포함하는 함수</li>
<li>try-catch를 포함하는 함수</li>
<li>try-finally를 포함하는 함수</li>
<li><code>let</code>이나 <code>const</code> 선언을 포함하는 함수</li>
<li><code>__proto__</code>나 <code>get</code>이나 <code>set</code> 선언이 있는 객체 표현식을 포함하는 함수</li>
</ul>
<p>앞으로도 계속 안될 것 같은 문법</p>
<ul>
<li><code>debugger</code>문을 포함하는 함수</li>
<li><code>eval()</code>을 호출하는 함수</li>
<li><code>with</code> 문을 포함하는 함수</li>
</ul>
<p><code>try-catch-finally</code>에 대해서는 다음과 같이 함수로 뽑아서 우회 가능</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> errorObject = &#123;<span class="attr">value</span>: <span class="literal">null</span>&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tryCatch</span>(<span class="params">fn, ctx, args</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fn.apply(ctx, args);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        errorObject.value = e;</span><br><span class="line">        <span class="keyword">return</span> errorObject;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = tryCatch(mightThrow, <span class="keyword">void</span> <span class="number">0</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);  </span><br><span class="line"><span class="comment">//Unambiguously tells whether the call threw</span></span><br><span class="line"><span class="keyword">if</span>(result === errorObject) &#123;  </span><br><span class="line">    <span class="keyword">var</span> error = errorObject.value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;  </span><br><span class="line">    <span class="comment">//result is the returned value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3>3. <code>arguments</code> 관리</h3>
<h4>3.1. <code>arguments</code>를 함수 내에서 사용하면서 파라미터로 넘겨준 변수에 다른 값을 넣을 때</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaultArgsReassign</span>(<span class="params">a, b</span>) </span>&#123;  </span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">2</span>) b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>우회</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reAssignParam</span>(<span class="params">a, b_</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> b = b_;</span><br><span class="line">    <span class="comment">//unlike b_, b can safely be reassigned</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">2</span>) b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>혹은</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reAssignParam</span>(<span class="params">a, b</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (b === <span class="keyword">void</span> <span class="number">0</span>) b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4>3.2. <code>arguments</code>를 외부로 노출</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">leaksArguments1</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">leaksArguments2</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">leaksArguments3</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>우회</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doesntLeakArguments</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> args = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">arguments</span>.length);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; args.length; ++i) &#123;</span><br><span class="line">        args[i] = <span class="built_in">arguments</span>[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> args;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>혹은 빌드 과정에서 매크로를 사용해 치환하는 방법</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doesntLeakArguments</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    INLINE_SLICE(args, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> args;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>bluebird에서 사용하는 방법</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doesntLeakArguments</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> $_len = <span class="built_in">arguments</span>.length;<span class="keyword">var</span> args = <span class="keyword">new</span> <span class="built_in">Array</span>($_len); <span class="keyword">for</span>(<span class="keyword">var</span> $_i = <span class="number">0</span>; $_i &lt; $_len; ++$_i) &#123;args[$_i] = <span class="built_in">arguments</span>[$_i];&#125;</span><br><span class="line">    <span class="keyword">return</span> args;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4>3.3. arguments에 값을 넣을 때</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">assignToArguments</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">arguments</span> = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">arguments</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이것만 사용</p>
<ul>
<li><code>arguments.length</code></li>
<li>유효한 인덱스 <code>i</code>를 통해 <code>arguments[i]</code></li>
<li><code>.length</code>없이 직접 사용하지마라. <code>x.apply(y, arguments)</code> 이건 괜찮다. <code>.slice</code>와 <code>Function#apply</code>는 특별하니까</li>
</ul>
<h3>4. switch-case</h3>
<p>case 조건이 128개까지는 괜찮고 초과하면 최적화를 못한다.</p>
<h3>5. for-in</h3>
<h4>5.1. key가 지역변수가 아닐 때</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nonLocalKey1</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> obj);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>혹은</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> key;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nonLocalKey2</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span>(key <span class="keyword">in</span> obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>외부로 노출하거나 해당 루프의 지역변수가 아니면 불가능.</p>
<h4>5.2. 순환하려는 객체가 &quot;simple enumerable&quot;이 아닐 때</h4>
<h5>5.2.1. &quot;hash table mode&quot;의 객체</h5>
<p>생성자 밖에서 동적으로 프로퍼티들을 추가하거나 삭제할 때 hash table mode가 된다.</p>
<h5>5.2.2. 프로토타입 체인에서 enumerable 프로퍼티를 가질 때</h5>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;  </span><br></pre></td></tr></table></figure>
<p>이렇게 하면 모든 객체에서 for-in이 최적화되지 못한다. <code>Object.create(null)</code>만 예외. 필요하면 <code>Object.defineProperty</code>로 enumerable하지 않은 프로퍼티를 만들 수 있지만 비추. (역주, 이유는 나와있지 않음)</p>
<h5>5.2.3. 배열의 인덱스를 키값으로 사용할 때</h5>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iteratesOverArray</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> arr) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>배열을 순환하고 싶으면 <code>Object.keys</code>를 사용하는게 좋고, 프로토타입 체인 전체를 돌고 싶다면 다음과 같이 key값을 따로 모아서 처리한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritedKeys</span>(<span class="params">obj</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> ret = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        ret.push(key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/V8/" class="post__tag__link">V8</a></li><li class="post__tag__item"><a href="/tags/optimize/" class="post__tag__link">optimize</a></li><li class="post__tag__item"><a href="/tags/anti-pattern/" class="post__tag__link">anti-pattern</a></li></ul><a href="/2014/06/28/v8-optimization-killers/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2014-06-24T15:00:00.000Z" class="post__time">June 25, 2014</time><h1 class="post__title"><a href="/2014/06/25/build-swift-file-on-sublime-text/">Sublime Text에서 swift파일 빌드하기</a></h1></header><div class="post__main echo"><h4>조건</h4>
<ul>
<li>Sublime Text와 <a target="_blank" rel="noopener" href="https://sublime.wbond.net/installation">Package Control</a>이 설치되어 있을 것</li>
<li>Swift 개발 환경이 설정되어있을 것</li>
</ul>
<h4>순서</h4>
<ul>
<li>Package Control을 통해 Swift 패키지 설치</li>
<li>Tools &gt; Build System &gt; New Build System... 에서 다음과 같이 입력한다.</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;cmd&quot;</span>: [<span class="string">&quot;swift&quot;</span>, <span class="string">&quot;-i&quot;</span>, <span class="string">&quot;$file&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;selector&quot;</span>: <span class="string">&quot;source.swift&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>빌드 정보를 저장한다. (예, <code>Swift.sublime-build</code>)</li>
<li>cmd + B로 빌드한다.</li>
</ul>
<p><img src="/images/build-swift-file-on-sublime-text/swift-sublime-build.png" alt=""></p>
<h4>부연 설명</h4>
<p>Swift 패키지를 설치하면 문법 강조는 기본으로 지원하고 각종 Snippet을 지원해서 Xcode만큼은 아니더라도 편하게 작성할 수 있다.</p>
<p><img src="/images/build-swift-file-on-sublime-text/swift-sublime-snippet.png" alt=""></p>
<p><a target="_blank" rel="noopener" href="https://github.com/quiqueg/Swift-Sublime-Package">Swift 패키지 프로젝트</a>에서 패키지 파일들을 확인하면 보다 자세한 정보를 알 수 있다.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Sublime-Text/" class="post__tag__link">Sublime Text</a></li><li class="post__tag__item"><a href="/tags/swift/" class="post__tag__link">swift</a></li></ul><a href="/2014/06/25/build-swift-file-on-sublime-text/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2014-06-22T15:00:00.000Z" class="post__time">June 23, 2014</time><h1 class="post__title"><a href="/2014/06/23/add-current-repository-info-to-shell/">쉘에서 현재 위치의 repository 정보 추가하기</a></h1></header><div class="post__main echo"><h1>GitHub에서 공개한 Bash/Zsh/Tcsh용 Prompt</h1>
<ul>
<li>GitHub: <a target="_blank" rel="noopener" href="https://github.com/git/git/blob/master/contrib/completion/">git / contrib / completion /</a></li>
<li>기본 구조: (&lt;브랜치 이름&gt;)</li>
<li>설명: <a target="_blank" rel="noopener" href="http://code-worrier.com/blog/git-branch-in-bash-prompt/">Put Your Git Branch in Your Bash Prompt</a></li>
</ul>
<h3>한줄 추가로 현재 브랜치 표시</h3>
<p>기본 구조: (&lt;브랜치 이름&gt;)
설명: <a target="_blank" rel="noopener" href="http://ccoroom.tumblr.com/post/14261727932/git">명령 프롬프트에 현재 Git 브랜치 표시하기</a></p>
<h3>현재 브랜치와 컬러 표시</h3>
<p>기본 구조: (&lt;브랜치 이름&gt;)
설명: <a target="_blank" rel="noopener" href="http://blog.outsider.ne.kr/616">bash 프롬프트에 Git와 Mercurial의 branch를 표시하기</a>
비고: Mercurial도 가능.</p>
<h3>vcprompt를 이용한 프롬프트</h3>
<p>설명: <a target="_blank" rel="noopener" href="http://blog.outsider.ne.kr/737">vcprompt를 이용해서 bash 프롬프트에 VCS 정보 표시하기</a>
기본 구조: (&lt;형상관리 이름&gt;:&lt;브랜치 이름&gt; )
비고: VCS 이름, commit hash, branch, revision, modified file, not-added 등 각종 변수 지원</p>
<h3>Bash prompot에서 Git 정보 보기</h3>
<p>GitHub: <a target="_blank" rel="noopener" href="https://github.com/magicmonty/bash-git-prompt">magicmonty/bash-git-prompt</a>
기본 구조: (&lt;브랜치 이름&gt; &lt;브랜치 상태&gt;|&lt;로컬 상태&gt;)
설명: <a target="_blank" rel="noopener" href="http://resoneit.blogspot.kr/2014/01/bash-git.html">리눅스 bash shell에서 git 상태 정보 보기</a>
비고: add, conflict, modified, non-added, stashed, yet-pushed, yet-pulled 상태의 숫자 등 표시
결론
vcprompt를 이용했다. 이유는 homebrew로 설치 가능한 유일한 방법이라 설치하기가 쉬워서. 이전의 설정은 다음과 같다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&quot;<span class="variable">$C_LIGHTGRAY</span>(\t)<span class="variable">$C_RESET</span> \W \u $C_GRAY$ <span class="variable">$C_RESET</span>&quot;</span>  </span><br></pre></td></tr></table></figure>
<p>즉, ((시간) 사용자 현재디렉토리 $ )의 구조였다. 여기에서 vcprompt를 추가해서</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VC=<span class="string">&quot; \$(vcprompt -f &quot;</span><span class="variable">$C_BG_GREEN</span>%n:%b<span class="variable">$C_BG_RED</span>%m%u<span class="variable">$C_RESET</span><span class="string">&quot;)&quot;</span>  </span><br><span class="line"><span class="built_in">export</span> PS1=<span class="string">&quot;<span class="variable">$C_LIGHTGRAY</span>(\t)<span class="variable">$C_RESET</span> \W \u<span class="variable">$VC</span> $C_GRAY$ <span class="variable">$C_RESET</span>&quot;</span>  </span><br></pre></td></tr></table></figure>
<p>((시간) 사용자 현재디렉토리 형상관리정보 $)의 구조로 변경했다.</p>
<p><img src="/images/add-current-repository-info-to-shell/shell.png" alt="">
위와 같이 전/후가 변경되었다.</p>
<p>사용된 색상관련 변수는 <a target="_blank" rel="noopener" href="http://blog.saltfactory.net/99">터미널에서 프롬프트(Prompt)에 나타나는 정보와 색상 변경하기</a>를 참고하면 된다.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/vcprompt/" class="post__tag__link">vcprompt</a></li><li class="post__tag__item"><a href="/tags/shell/" class="post__tag__link">shell</a></li></ul><a href="/2014/06/23/add-current-repository-info-to-shell/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2012-11-17T11:50:00.000Z" class="post__time">November 17, 2012</time><h1 class="post__title"><a href="/2012/11/17/after-coursera-fppis-and-test/">Coursera - FPPiS 후기, 그리고 테스트</a></h1></header><div class="post__main echo"><p>coursera.org의 functional programming principle in scala의 진행이 끝났다. functional programming이라는 생소한 개념을 배우면서 재미있기도 했고, 강의를 시작하기 직전에 봤던 '자바 개발자를 위한 함수형 프로그래밍'를 읽으면서 제대로 알지 못했던 개념을 좀 더 확실하게 배웠다. 물론 강의와 서적 모두 '입문'에 대한 것이라 의미에 대해 알려면 더 많은 경험이 필요하겠고, 서적과 강의가 지향하는 바가 조금 달라서 내용도 다르지만 서적을 보면서 제대로 이해하지 못했던 개념을 강의를 보면서 이해하는데 도움이 되었고 기초가 있는 상태에서 다시 서적을 읽으면 더 이해가 잘 될 것 같다.</p>
<p>사실 강의를 읽으면서 도움이 된 것은 functional programming에 대한 이해보다 다른 것이다. 물론 functional programming에 대한 기초를 쌓는데도 무척 도움이 되었지만, 그것보다 과제를 진행하는데 있어서 '테스트'의 중요성에 대한 인식이 생겼다.</p>
<p>과제를 진행하는 방식은 이렇다.</p>
<ol>
<li>테스트 케이스가 주어진다.</li>
<li>작성해야하는 로직이 제외된 코드가 주어진다.</li>
<li>단계별로 로직을 구현하면서 테스트를 통해 작성된 로직이 유효한지 확인한다.</li>
<li>이전 단계에서 구현한 것을 기반으로 다음 단계의 로직을 작성한다.</li>
</ol>
<p>물론 주어진 테스트 케이스들 중에서 좋은 테스트 케이스만 있는 것이 아니다. 스펙에서 요구되었지만 테스트에서 확인하지 않은 케이스(정렬된 배열을 가져와야하는데 그 종류와 갯수만 확인하는 경우)는 다음 단계의 테스트를 통과하지 못한다. 그럴 경우에는 테스트에 성공한 코드로 돌아가서 수정을 해야하므로 좋은 테스트라고 볼 수 없다. 이런 식으로 좋은 테스트가 적성되어있는 경우에는 그 테스트를 통과하면 다시 그 코드를 수정할 필요가 없고, 성능상의 문제가 있는 경우에는 그 코드를 수정하고 다시 테스트를 통과하면 다른 코드들을 건들이지 않아도 된다.</p>
<p>여기에 대한 전제가 중요하긴 하다. 앞서 이야기했듯이 '좋은(명확한) 테스트가 작성되어 있을 것', 그리고 '확실히 단계별로 구분된 설계가 있을 것'이다. 이 전제들이 참 어렵지만, 반대로 생각하면 이 전제들이 확실한 경우가 있다. 바로 내가 겪었던 것과 같이 '과제'를 작성하는 경우다. 커다란 과제가 주어졌을 경우에 어디서부터 어떻게 접근해야할지 명세서를 봐도 막막한 경우가 있는데 그런 경우에 bottom-up으로 제대로 된 설계에 따라 테스트를 하나씩 거치면서 확실히 눈에 보이는 진척을 확인할 수 있다. 물론 실무에 적용하려면 저 전제들을 만족하기 참 힘들겠지만 말이다. 혹은 퍼포먼스의 이슈가 없거나 종속성이 적은 코드들의 경우에 신입사원들에게 연습시키는 용도로는 확실할 수 있다.</p>
<p>예전에 일하던 회사에서 '시켜서' 억지로 작성한 테스트들이 떠오르며 (사실 잘 떠오르지도 않지만) 부끄러워졌다. 사실 TDD라고 하지만 아직도 TDD가 뭔지 잘 모르겠고, 이해하지 못한 상태에서 작성한 테스트들은 당연히 좋은 테스트일리가 없었다. 이렇게 실무에서 어떻게 테스트를 더 잘 적용시킬 수 있는지에 대해 듣고 싶어서 저번달에 모 컨퍼런스에 다녀왔는데 그냥 '테스트는 의지를 가지고 해야 한다.'라는 말만 반복해서 하더라. 하긴 누군가가 말해줘도 그걸 체득하기는 어렵다. 계기와 경험이 중요한데 나는 일단 이 강의라는 계기를 얻었으니 앞으로 경험을 쌓도록 노력해야지.</p>
<p>참고로 80점 만점에서 60%(48점)만 얻으면 인증을 얻는데 과제를 너무 늦게 시작하는 바람에 1주차에 80% 감점을 받고 시작한 것을 합쳐서 69점으로 통과했다. 만점을 목표로 한 것에 비하면 부끄럽지만 인증을 받은 것만으로도 일단은 만족. 그리고 스칼라 스터디에 한번 참여해보고 싶었는데 영어 실력이 부족하여 참여할만큼 이해한 강의가 없어서 한번도 참여를 못한 것 두가지가 아쉽다.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/coursera/" class="post__tag__link">coursera</a></li><li class="post__tag__item"><a href="/tags/Scala/" class="post__tag__link">Scala</a></li><li class="post__tag__item"><a href="/tags/test/" class="post__tag__link">test</a></li></ul><a href="/2012/11/17/after-coursera-fppis-and-test/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2012-10-09T01:21:00.000Z" class="post__time">October 9, 2012</time><h1 class="post__title"><a href="/2012/10/09/getting-cozy-with-underscore-js/">underscore.js로 편해지자</a></h1></header><div class="post__main echo"><blockquote>
<h2>Translation of &quot;<a target="_blank" rel="noopener" href="http://code.tutsplus.com/tutorials/getting-cozy-with-underscore-js--net-24581">Getting Cozy With Underscore.js</a>&quot; into Korean, under the same license as the original.</h2>
</blockquote>
<p>들어가기 전에, <a target="_blank" rel="noopener" href="http://almostobsolete.net/talks/functionaljs/">functional javascript</a> 자바스크립트의 함수형 프로그래밍에 대한 간략한 소개가 있는 슬라이드. 함수형 프로그래밍에 개념과 underscore의 컨셉을 이해하는데 도움이 된다.</p>
<hr>
<h1>Underscore.js와 만나다</h1>
<p>그래서 Underscore가 정확히 뭐하는건데?</p>
<blockquote>
<p>Underscore는 Prototype.js(혹은 Ruby)처럼 기본 JavaScript 객체들을 확장하지 않고 함수형 프로그래밍을 지원할 수 있는 유용한 JavaScript Library이다.</p>
</blockquote>
<p>Python이나 Ruby로 작업할 때 더 좋은 점은 훨씬 쉽게 쓸 수 있는 <code>map</code>같은 멋진 기본함수들이 있다는 것이다. 슬프게도 JavaScript의 현재 버전에서는 그런 native로 제공되는 것들이 꽤나 부실하다. 위에서 읽은 것처럼, Underscore.js는 단지 4kb라는 터무니없는 용량의 좀 멋진 JavaScript Library다.</p>
<hr>
<h2>Underscore in Action</h2>
<p>&quot;라이브러리 이야기는 충분히 많이 들었다&quot;, 라는 말할지도 모른다. 맞다, 하지만 일단 한번 보자. 임의의 시험점수 배열에서 90점 넘는 리스트가 필요하면 보통은 이렇게 짤 것이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scores = [<span class="number">84</span>, <span class="number">99</span>, <span class="number">91</span>, <span class="number">65</span>, <span class="number">87</span>, <span class="number">55</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">95</span>, <span class="number">42</span>],</span><br><span class="line">topScorers = [], scoreLimit = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;=scores.length; i++)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">if</span> (scores[i]&gt;scoreLimit)</span><br><span class="line">   &#123;</span><br><span class="line">      topScorers.push(scores[i]);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(topScorers);</span><br></pre></td></tr></table></figure>
<p>꽤 깔끔하고 심지어 최적화도 있는데, 내가 하려는 것보다는 좀 길다. underscore로 하면 이렇게 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scores = [<span class="number">84</span>, <span class="number">99</span>, <span class="number">91</span>, <span class="number">65</span>, <span class="number">87</span>, <span class="number">55</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">95</span>, <span class="number">42</span>],</span><br><span class="line">topScorers = [], scoreLimit = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line">topScorers = _.select(scores, <span class="function"><span class="keyword">function</span>(<span class="params">score</span>)</span>&#123; <span class="keyword">return</span> score &gt; scoreLimit;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(topScorers);</span><br></pre></td></tr></table></figure>
<p>넌 어떤지 모르겠지만 난 좀 너드같다. 저기있는 코드 굉장히 간결하고 읽기 좋다.</p>
<h2>괜찮긴한데 진짜 필요해?</h2>
<p>모든건 뭘 하려고 하는지에 달렸다. 단지 DOM 다루는데 사용을 제한한다면 jQuery로 원하는건 대부분 할 수 있다. 반대로, DOM이랑 관련없거나 좀 복잡한 MVC나 front-end 코드들이라면 underscore는 확실히 괜찮다. ECMA 스펙에 맞춰서 천천히 라이브러리들의 기능이 업데이트되는 동안에, 모든 브라우져에서 돌아가는건 가능하지도 않고 여러 브라우저들에서 돌아가게 하는 것도 또다른 악몽이다. underscore는 어디서든 작동하도록 좋은 추상화를 제공한다. 그리고 퍼포먼스를 중시하는 사람이거나 그래야하는 사람이면 underscore는 가능한 native 뒤에 구현된거라 가능한 최적화된 성능을 보장한다.</p>
<h2>시작해보자</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://underscorejs.org/docs/underscore.html">여기</a>서 소스를 가져다 넣기만 하면 페이지는 잘 돌아간다.</p>
</blockquote>
<p>적용시키는데 뭔가 큰 작업을 기대했으면 꽤나 실망할꺼다. 그냥 <a target="_blank" rel="noopener" href="http://underscorejs.org/docs/underscore.html">여기</a>에서 소스를 가져다 넣기만 하면 페이지는 잘 돌아간다. underscore는 global 영역에서 단일 객체로 만들어지고 모든 기능을 한다. 이 객체는 underscore 문자, _로 불린다. 흥미롭게도 jQuery가 dollar 문자($)로 돌아가는 것과 매우 비슷해 보인다. 또 jQuery처럼 충돌을 피하려면 다른 문자로 쓸 수도 있다.</p>
<h2>함수형? 아니면 객체지향?</h2>
<p>라이브러리의 공식적인 광고에는 함수형 프로그래밍 지원이라고 써있는데, 실제로 쓰는 다른 방법도 있다. 저 위에서 썼던 예제를 가져와보면</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scores = [<span class="number">84</span>, <span class="number">99</span>, <span class="number">91</span>, <span class="number">65</span>, <span class="number">87</span>, <span class="number">55</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">95</span>, <span class="number">42</span>], topScorers = [], scoreLimit = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line">topScorers = _.select(scores, <span class="function"><span class="keyword">function</span>(<span class="params">score</span>)</span>&#123; <span class="keyword">return</span> score &gt; scoreLimit;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(topScorers);</span><br></pre></td></tr></table></figure>
<p>위의 방법은 함수형이나 절차지향적인 접근이다. 또 더 직관적이며 아마 더 확실하게 객체지향적으로 사용할 수도 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scores = [<span class="number">84</span>, <span class="number">99</span>, <span class="number">91</span>, <span class="number">65</span>, <span class="number">87</span>, <span class="number">55</span>, <span class="number">72</span>, <span class="number">68</span>, <span class="number">95</span>, <span class="number">42</span>], topScorers = [], scoreLimit = <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line">topScorers = _(scores).select(<span class="function"><span class="keyword">function</span>(<span class="params">score</span>)</span>&#123; <span class="keyword">return</span> score &gt; scoreLimit;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(topScorers);</span><br></pre></td></tr></table></figure>
<p>실제로 '정답'이라는건 없지만, jQuery식으로 method 뒤에 chainging을 할 수 있다는 것을 알아두라.</p>
<h2>기능을 확인해보자</h2>
<p>underscore는 기능 자체의 숫자보다 많은 60개보다 조금 넘는 함수를 지원한다. 돌아가는 함수들을 그룹으로 다음과 같이 분류할 수 있다.</p>
<ul>
<li>Collections</li>
<li>Arrays</li>
<li>Objects</li>
<li>Functions</li>
<li>Utilities</li>
</ul>
<p>각각 뭘 하는지를 보고, 가능하면 섹션에서 한두개쯤 적용해보겠다.</p>
<h2>Collections</h2>
<p>connection은 배열이나 객체가 될 수 있고, 의미상으로 말하자면 자바스크립트에서의 (객체와 배열이)혼합된 배열이다. underscore는 collections에서 돌아가는 많은 method들을 제공한다. 위에서 이미 <code>select</code>를 봤다. 여기 더 쓸만한게 하나 있다.</p>
<h3>Pluck</h3>
<p>key와 value 쌍으로 이루어진 깔끔하고 짧은 배열이 있는데 여기에서 특정 속성을 추출하려고 한다. underscore로는 아주 쉽다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Tuts = [&#123;<span class="attr">name</span> : <span class="string">&#x27;NetTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;Web Development&#x27;</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">&#x27;WPTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;WordPress&#x27;</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">&#x27;PSDTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;PhotoShop&#x27;</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">&#x27;AeTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;After Effects&#x27;</span>&#125;];</span><br><span class="line"><span class="keyword">var</span> niches = _.pluck(Tuts, <span class="string">&#x27;niche&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(niches);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [&quot;Web Development&quot;, &quot;WordPress&quot;, &quot;PhotoShop&quot;, &quot;After Effects&quot;]</span></span><br></pre></td></tr></table></figure>
<p><code>pluck</code>을 쓰면 객체나 배열을 훑는 것만큼 속성을 뽑아내는 것은 간단하다. 각 사이트들이 분야(niche)에 속하는지 추출해봤다.</p>
<h3>Map</h3>
<p>map은 collection으로부터 함수를 통해 각 요소들을 바뀐 배열을 만든다. 앞에서 있던 예제에서 조금 더해봤다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Tuts = [&#123;<span class="attr">name</span> : <span class="string">&#x27;NetTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;Web Development&#x27;</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">&#x27;WPTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;WordPress&#x27;</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">&#x27;PSDTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;PhotoShop&#x27;</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">&#x27;AeTuts&#x27;</span>, <span class="attr">niche</span> : <span class="string">&#x27;After Effects&#x27;</span>&#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> names = _(Tuts).pluck(<span class="string">&#x27;name&#x27;</span>).map(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>)</span>&#123;<span class="keyword">return</span> value + <span class="string">&#x27;+&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(names);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [&quot;NetTuts+&quot;, &quot;WPTuts+&quot;, &quot;PSDTuts+&quot;, &quot;AeTuts+&quot;]</span></span><br></pre></td></tr></table></figure>
<p>이름 끝에 +를 붙이도록 해서, 추출된 배열에는 +가 추가되어있다. 간단한 연쇄(method chaining; 여기에서는 pluck+map)를 하는데 제한은 없다. 지나가는 값들을 원하는데로 다 바꿀 수 있다.</p>
<h3>All</h3>
<p><code>all</code>은 collection 속의 모든 값들이 어떤 기준에 만족하는지 확인하는데 매우 유용하다. 예를 들어, 학생이 모든 과목에서 통과했는지 확인해보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Scores = [<span class="number">95</span>, <span class="number">82</span>, <span class="number">98</span>, <span class="number">78</span>, <span class="number">65</span>];</span><br><span class="line"><span class="keyword">var</span> hasPassed = _(Scores).all(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>)</span>&#123;<span class="keyword">return</span> value&gt;<span class="number">50</span>; &#125;);</span><br><span class="line"><span class="built_in">console</span>.log(hasPassed);</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2>Arrays</h2>
<p>underscore에만 있는 배열을 다루는 함수들이 굉장히 평이 좋은데, 다른 언어에 비해 JavaScript는 배열을 다루는 함수가 거의 없어서다.</p>
<h3>Uniq</h3>
<p>이 method는 기본적으로 배열을 읽어서 중복값을 제거하고 유일한 값들만 돌려준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> uniqTest = _.uniq([<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(uniqTest);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [1, 5, 4, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>거대한 데이터들을 추려서 중복값을 제거하는데 무척 편하다. 원래 배열의 순서를 유지하기 때문에 중복값 중 첫번째 값이 나온다는걸 명심하자.</p>
<h3>Range</h3>
<p>어떤 '범위'나 숫자들의 리스트를 만들 때 무척 편하다. 빠르게 예제를 보자</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tens = _.range(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(tens);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [0, 10, 20, 30, 40, 50, 60, 70, 80, 90]</span></span><br></pre></td></tr></table></figure>
<p>파라미터는 순서대로 시작하는 값, 끝나는 값, 그리고 차이값(step)다. 감소하는 범위를 만들고 싶으면 음수의 차이값을 쓰면 된다.</p>
<h3>Intersection</h3>
<p>이 method는 각 배열들을 두 배열씩 비교해서 같은 모든 배열에 있는 값들의 배열을 돌려준다. 집합론에서의 교집합같은 것이다. 위에서 나왔던 예제를 확장해서 이게 어떻게 돌아가는지 보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tens = _.range(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>), eights = _.range(<span class="number">0</span>, <span class="number">100</span>, <span class="number">8</span>), fives = _.range(<span class="number">0</span>, <span class="number">100</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> common = _.intersection(tens, eights, fives );</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(common);</span><br><span class="line"></span><br><span class="line"><span class="comment">// [0, 40, 80]</span></span><br></pre></td></tr></table></figure>
<p>쉽지 않나? 비교할 배열들만 써놓으면 underscroe가 나머지는 해준다.</p>
<h2>Objects</h2>
<p><em>is</em> 메소드들은 뭔가를 확인하는데 쓰일꺼라 예상할 수 있고(예를 들어 isEmpty, isEqual 등), underscore는 객체를 복사하거나 확장하거나 기타 등등을 다루는 여러 method들을 제공한다.</p>
<h3>Keys and Values</h3>
<p>커다락 객체에서 key들만 필요하거나 value들만 필요하면? 쉽게 가져올 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Tuts = &#123; <span class="attr">NetTuts</span> : <span class="string">&#x27;Web Development&#x27;</span>,  <span class="attr">WPTuts</span> : <span class="string">&#x27;WordPress&#x27;</span>,  <span class="attr">PSDTuts</span> : <span class="string">&#x27;PhotoShop&#x27;</span>, <span class="attr">AeTuts</span> : <span class="string">&#x27;After Effects&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> keys = _.keys(Tuts), values = _.values(Tuts);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(keys + values);</span><br><span class="line"><span class="comment">// NetTuts,WPTuts,PSDTuts,AeTutsWeb Development,WordPress,PhotoShop,After Effects</span></span><br></pre></td></tr></table></figure>
<h3>Defaults</h3>
<p>기본으로 사용해야하는 값들과 함께 객체를 만드는데 꽤 유용하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tuts = &#123; <span class="attr">NetTuts</span> : <span class="string">&#x27;Web Development&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> defaults = &#123; <span class="attr">NetTuts</span> : <span class="string">&#x27;Web Development&#x27;</span>, <span class="attr">niche</span>: <span class="string">&#x27;Education&#x27;</span>&#125;;</span><br><span class="line">_.defaults(tuts, defaults);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(tuts);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Object &#123; NetTuts=&quot;Web Development&quot;, niche=&quot;Education&quot;&#125;</span></span><br></pre></td></tr></table></figure>
<h2>Functions</h2>
<p>좀 이상하게 들리지만, underscore는 함수에서 돌아가는 함수들을 갖고 있다. 함수들의 대부분은 설명하기 복잡한 것들이어서 제일 간단한 것을 가져왔다.</p>
<h3>Bind</h3>
<p><code>this</code>는 JavaScript에서 설명하기 힘든 부분이고 많은 개발자들을 멘붕하게 만든다. 이 method는 그나마 건들기 쉽게 해준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">greeting</span>: <span class="string">&quot;Howdy&quot;</span> &#125;,</span><br><span class="line">    f = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">this</span>.greeting +<span class="string">&quot; &quot;</span>+ name; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> greet = _.bind(f, o);</span><br><span class="line"></span><br><span class="line">greet(<span class="string">&quot;Jess&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>헷갈려서 계속 쳐다보게 만든다. bind 함수는 기본적으로 함수가 어디에서 언제 호출이되건 <code>this</code>값을 유지하게 해준다. <code>this</code>를 가져다가 event를 다룰 때 특별히 유용하다.</p>
<h2>Utilities</h2>
<p>그리고 쓰기에 더 괜찮은게, underscore는 utility 함수들을 대량으로 지원한다. 시간이 없으니 크고 아름다운 것 하나만 보자.</p>
<h3>Templating</h3>
<p>이미 template을 만드는 많은 solution들이 있지만 underscore는 강력하면서 구현이 적다는데 장점이 있다. 대충 예제를 하나 만들어보면</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data =   &#123;<span class="attr">site</span>: <span class="string">&#x27;NetTuts&#x27;</span>&#125;, template =   <span class="string">&#x27;Welcome! You are at &lt;%= site %&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parsedTemplate = _.template(template,  data );</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(parsedTemplate);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Welcome! You are at NetTuts</span></span><br></pre></td></tr></table></figure>
<p>우선, template를 통해 template으로 옮겨서 데이터를 만들 수 있다. 기본적으로, underscore는 모두 custom할 수 있는 ERB(embeded Ruby) 스타일 문자를 사용한다. 그 자리에, template과 data를 가지고 <code>template</code>을 간단하게 호출하면 된다. 필요하면 나중에 업데이트하기 위해 분리된 문자열에 결과를 저장한다.</p>
<p>이건 underscore의 template 중에서 극단적으로 간단한 예제라는걸 명심해라. <code>&lt;% %&gt;</code> 문자를 이용한 template 안쪽에서 어떤 JavaScript 코드를 사용할 수 있다. JSON같은 복잡한 객체를 훑을 필요가 있을 때에는 underscore의 우수한 collection 함수들과 함께 template을 빠르게 만들 수도 있다.</p>
<h2>여전히 왜 써야하는지 모르겠다면</h2>
<blockquote>
<p>jQuery와 underscore를 함께</p>
</blockquote>
<p>jQuery와 underscore는 상호보완적인 것이라 함께 쓰면 더 좋다. 자, jQuery는 아주 괜찮은 케이스들도 있다. DOM을 다룬다거나 애니메이션같은 것들이 말이다. 하지만 더 고수준이나 저수준을 다루지는 않는다. 고수준 이슈를 다루는 Backbone이나 Knockout같은 프레임웍이라면 필요한 부분에 전부 끼워넣을 수 있다.</p>
<p>좀 더 넓게 보자면, jQuery는 DOM을 다루는 기능 때문에 브라우저 밖에서는 거의 쓸 일이 없다. 다른 면으로 underscore는 브라우져에서도 사용할 수 있고 server단에서도 별 이슈없이 사용할 수 있다. 사실, underscore는 node module들이 제일 많이 의존하고 있다. 지금 말한건 그렇다. underscore의 활용에 대해서는 겉만 살짝 긁은 정도다.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/underscore/" class="post__tag__link">underscore</a></li></ul><a href="/2012/10/09/getting-cozy-with-underscore-js/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2012-10-07T18:55:00.000Z" class="post__time">October 8, 2012</time><h1 class="post__title"><a href="/2012/10/08/typescript-syntax-summary/">typescript syntax summary</a></h1></header><div class="post__main echo"><p>Microsoft가 며칠전 typescript를 발표했다. 아마 CoffeeScript처럼 ECMA Script 표준에 본격적으로 뛰어들기 위한 포석이 아닐까 싶은데, 어찌되었건 현재로는 무려 major IDE(라고는 하지만 Visual studio)에서도 강력하게 지원하고, 사람들이 많이 쓰는 <a target="_blank" rel="noopener" href="http://blogs.msdn.com/b/interoperability/archive/2012/10/01/sublime-text-vi-emacs-typescript-enabled.aspx">Sublime Text2, Emacs, Vim에서도 플러그인으로 지원</a>된다. 심지어 며칠전에 추가했던 SyntaxHighlighter의 <a target="_blank" rel="noopener" href="http://ianobermiller.com/blog/2012/10/03/typescript-syntax-highlighting-for-wordpress/">typescript 버전</a>도 벌써 올라왔다. 여하튼 좋은지 아닌지는 일단 적당히 써본 다음에 판단할 수 있으니 발이라도 살짝 담궈보기 위해서 Language Specification 문서를 받아봤으나 읽기엔 너무 길어서 dictation 연습이나 할까 하고 <a target="_blank" rel="noopener" href="http://channel9.msdn.com/posts/Anders-Hejlsberg-Introducing-TypeScript">소개 동영상</a>을 보려고 시도했다...고 하지만 1분만에 포기하고 그냥 언급된 소스만 보면서 메모해놓은 것들을 정리해봤다.</p>
<h3>typescript syntax summary</h3>
<p>variable type (declared like scala)
// number, string, bool</p>
<p>var name:type;
array expression.
x: string[]</p>
<p>: lambda expression.
() =&gt; retVal</p>
<p>: arg =&gt; retVal
(a: number, b: string) =&gt; a + b</p>
<p>interface declaration and usage</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Thing &#123;</span><br><span class="line">    a: <span class="built_in">number</span>;</span><br><span class="line">    b: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">x: Thing</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>object argument is expressed …</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">x: &#123;a: <span class="built_in">number</span>, b: <span class="built_in">string</span>&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and also expressed</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">process</span>(x: Thing) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">x.a</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>optional property</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Thing &#123;</span><br><span class="line">    <span class="selector-tag">a</span>: number;</span><br><span class="line">    <span class="selector-tag">b</span>?: string;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>method; function property</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Thing &#123;</span><br><span class="line">    a: <span class="built_in">number</span>;</span><br><span class="line">    foo(s: <span class="built_in">string</span>, n?: <span class="built_in">number</span>): <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>method overload ...</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Thing &#123;</span><br><span class="line">    a: <span class="built_in">number</span>;</span><br><span class="line">    foo(s: <span class="built_in">string</span>, n?: <span class="built_in">number</span>): <span class="built_in">string</span>;</span><br><span class="line">    foo(n: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> process = <span class="function"><span class="keyword">function</span>(<span class="params">x: Thing</span>) </span>&#123;</span><br><span class="line">    x.foo(<span class="string">&quot;abc&quot;</span>,<span class="number">1</span>)</span><br><span class="line">    x.foo(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">    x.foo(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and also expressed</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Thing &#123;</span><br><span class="line">    a: <span class="built_in">number</span>;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        (s: <span class="built_in">string</span>, n?: <span class="built_in">number</span>): <span class="built_in">string</span>;</span><br><span class="line">        (n: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>you cannot use that way</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Thing &#123;</span><br><span class="line">    a: <span class="built_in">number</span>;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        (n?: <span class="built_in">number</span>, <span class="attr">s</span>: <span class="built_in">string</span>): <span class="built_in">string</span>;</span><br><span class="line">        (n: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>you may wanna use that, then compiler tells you
Optional parameters may only be followed by other optional parameters</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; (n?: <span class="built_in">number</span>,s: <span class="built_in">string</span>): <span class="built_in">string</span>; (n: <span class="built_in">number</span>): <span class="built_in">number</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>method overload groupping</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Thing &#123;</span><br><span class="line">    a: <span class="built_in">number</span>;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        (s: <span class="built_in">string</span>): <span class="built_in">string</span>;</span><br><span class="line">        (n: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">        data: <span class="built_in">any</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> process = <span class="function"><span class="keyword">function</span>(<span class="params">x: Thing</span>) </span>&#123;</span><br><span class="line">    x.foo(<span class="number">1</span>)</span><br><span class="line">    x.foo(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">    x.foo.data = <span class="number">1</span></span><br><span class="line">    x.foo.data = <span class="string">&quot;abc&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>pre-declared method overload: index method like array, constructor method</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Thing &#123;</span><br><span class="line">    a: <span class="built_in">number</span>;</span><br><span class="line">    b: <span class="built_in">string</span>;</span><br><span class="line">    foo: &#123;</span><br><span class="line">        (s: <span class="built_in">string</span>): <span class="built_in">string</span>;</span><br><span class="line">        (n: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">        data: <span class="built_in">any</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">new</span> (s: <span class="built_in">string</span>): Element;</span><br><span class="line">    [index: <span class="built_in">number</span>]: <span class="built_in">Date</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>class definition</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="comment">// property</span></span><br><span class="line">    x: <span class="built_in">number</span>;</span><br><span class="line">    y: <span class="built_in">number</span>;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">dist</span>(<span class="params"></span>)</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">this</span>.x*<span class="built_in">this</span>.x + <span class="built_in">this</span>.y*<span class="built_in">this</span>.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> origin = <span class="keyword">new</span> Point(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Point(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">p.x = <span class="number">10</span>;</span><br><span class="line">Point.origin.x;</span><br></pre></td></tr></table></figure>
<p>private member: but not in real, just compiler tells &quot;it can`t&quot;</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">Point</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> color: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>-&gt;</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Point = (<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Point</span><span class="params">(x, y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>constructor with declaration</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constructor</span><span class="params">( <span class="keyword">public</span> x: number, <span class="keyword">public</span> y: number)</span></span></span><br></pre></td></tr></table></figure>
<p>constructor with default value</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constructor</span><span class="params">( <span class="keyword">public</span> x: number = 0, <span class="keyword">public</span> y: number = 0)</span></span></span><br></pre></td></tr></table></figure>
<p>inheritance // can be use an acceessor (can be duplicated declaration in scope)</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"><span class="keyword">public</span> x: <span class="built_in">number</span>, <span class="keyword">public</span> y: <span class="built_in">number</span></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point3D</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span>, <span class="keyword">public</span> z: <span class="built_in">number</span></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>auto-generated closure // compare next sources</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tracker</span> </span>&#123;</span><br><span class="line">    count = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="title">start</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// legacy expression</span></span><br><span class="line">        <span class="keyword">var</span> that = <span class="built_in">this</span></span><br><span class="line">        <span class="built_in">window</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            that.count++;</span><br><span class="line">            <span class="built_in">console</span>.log(that.count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">new</span> Tracker()).start();</span><br></pre></td></tr></table></figure>
<p>and</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tracker</span> </span>&#123;</span><br><span class="line">    count = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="title">start</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// lambda expression</span></span><br><span class="line">        <span class="built_in">window</span>.onmousemove = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.count++;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">new</span> Tracker()).start();</span><br></pre></td></tr></table></figure>
<p>module declaration</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module Hierarchical<span class="selector-class">.Module</span><span class="selector-class">.Name</span><span class="selector-class">.Is</span><span class="selector-class">.Available</span> &#123;</span><br><span class="line">    export class Point &#123;&#125;</span><br><span class="line">    class PrivateClass &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module Hierarchical<span class="selector-class">.Module</span><span class="selector-class">.Name</span><span class="selector-class">.Is</span><span class="selector-class">.Available</span> &#123;</span><br><span class="line">    export <span class="selector-tag">var</span> partialDeclare</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">var</span> shortedPath = Hierarchical<span class="selector-class">.Module</span><span class="selector-class">.Name</span><span class="selector-class">.Is</span>.Available</span><br><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">p</span> = new shortedPath.Point</span><br></pre></td></tr></table></figure>
<p>external module and function</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// target.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="built_in">module</span> target &#123;</span><br><span class="line">    <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">        bark = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;bow wow&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">version</span>(<span class="params"></span>)  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;v0.0.1&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="built_in">import</span> t = <span class="function"><span class="keyword">module</span><span class="params">(<span class="string">&quot;target&quot;</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">console</span>.<span class="title">log</span><span class="params">( <span class="params">(new t.target.Dog)</span>.bark<span class="params">()</span> )</span></span></span><br><span class="line"><span class="function"><span class="title">console</span>.<span class="title">log</span><span class="params">( t.version<span class="params">()</span> )</span></span></span><br></pre></td></tr></table></figure>
<p>=&gt;</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">03</span>:<span class="number">13</span>:<span class="number">55</span>) test seoh$ tsc main.ts -e</span><br><span class="line"><span class="keyword">bow </span>wow</span><br><span class="line"><span class="built_in">v0</span>.<span class="number">0</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>다른 소스를 보다보면 node.d.ts, jquery.d.ts같은 파일들이 있는데, declarations 옵션으로 컴파일을 하면 c/c++의 header와 같은 개념으로 decoration typescript(d.ts) 파일이 생성된다. 예를들어 위에 있는 target.ts를 컴파일하면</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">03</span>:<span class="number">50</span>:<span class="number">16</span>) <span class="keyword">test</span> seoh$ tsc --declarations <span class="keyword">target</span>.ts</span><br><span class="line">(<span class="number">03</span>:<span class="number">50</span>:<span class="number">23</span>) <span class="keyword">test</span> seoh$ cat <span class="keyword">target</span>.d.ts </span><br><span class="line"><span class="keyword">export</span> module <span class="keyword">target</span> &#123;</span><br><span class="line">    <span class="keyword">export</span> class Dog &#123;</span><br><span class="line">        public bark: () =&gt; <span class="keyword">string</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> version(): <span class="keyword">string</span>;</span><br></pre></td></tr></table></figure>
<p>처럼 선언만 남게 된다.</p>
<p>요즘 만지작거리고 있는 스칼라와 문법이 흡사해서 재미있기도 하고, module, class 개념으로 큰 프로젝트에서 분업할 때 편하긴 할 것 같은데... 아직 어디에 써야할지는 감이 안온다. 다른거 만지다보면 누군가 이런저런 토픽을 던저줄테니 일단 받아먹을 준비 중.</p>
<p>* 위에서 언급된 소스들은 module 부분을 제외하고 Microsoft의 동영상 소개에서 가져온 내용이니 해당 소스들에 대한 권리는 MS에게 있습니다.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/typescript/" class="post__tag__link">typescript</a></li></ul><a href="/2012/10/08/typescript-syntax-summary/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2012-09-25T15:28:00.000Z" class="post__time">September 26, 2012</time><h1 class="post__title"><a href="/2012/09/26/comparison-with-drm-free-ebook-publishers/">DRM-free eBook 출판사 비교</a></h1></header><div class="post__main echo"><p>&quot;<a target="_blank" rel="noopener" href="http://www.insightbook.co.kr/post/2361">인사이트가 PDF 서비스를 시작합니다.</a>&quot; 한국에서 최초로 DRM-free의 eBook을 출간한 회사가 '인사이트'가 아닐까.  4월 18일 저 글이 올라온 이후로 현재까지 인사이트에서는 <a target="_blank" rel="noopener" href="http://ebook.insightbook.co.kr/">인사이트 eBook</a>에서 11권의 책을 9800원(뽀모도로 테크닉)~27000원(파이썬 완벽 가이트)를 PDF로 판매하고 있다. 어디 한 플랫폼에 종속되는 것을 싫어해서 그때까지 eBook을 구매한 적이 없었는데 인사이트의 이 판매를 보고 반가워서 응원도 할 겸 이벤트(종이책을 구매하는 사람에게 일정기간동안 파이썬 완벽가이드를 27000-&gt;14000으로 할인)도 하는 겸 구매했던 것과 리팩터링 워크북을 포함해 2권을 구매했고 Closure나 Ruby 책도 고민 중에 있다. 그러던 차에 오늘 검색 중 반가운 소식을 들었다. IT서적 전문의 다른 출판사인 한빛미디어에서도 DRM-free eBook을 판매하기 시작했다는 <a target="_blank" rel="noopener" href="http://www.hanb.co.kr/ebook/about_ebook.html">소개페이지</a>를 발견했다.</p>
<p>IT말고 다른 분야에서도 DRM-free가 나왔으면 좋겠다는 생각도 들었지만 어쨌거나 보는 책의 반 이상, 아니 대다수가 IT관련 책이니 나에게는 좋은 일. &quot;유지보수하기 어렵게 코딩하는 방법: 평생 개발자로 먹고 살 수 있다&quot;라는 무료책을 비롯하여 현재 5권을 판매중이며 가격은 9900원(무료와 자바...를 제외한 나머지 세 책들)~11000원(자바 개발자를 위한 함수형 프로그래밍)로 인사이트에 비해 비교적 저렴한 편이나 대체로 얇은 책들 위주. 여하튼 굉장히 주관적이고 비논리적인 시각으로 특징을 비교해보자면</p>
<p><img src="/images/comparison-with-drm-free-ebook-publishers/1.png" alt="" title="파이썬 완벽 가이드(인사이트) vs 함수형 프로그래밍(한빛미디어)">
<img src="/images/comparison-with-drm-free-ebook-publishers/2.png" alt="" title="파이썬 완벽 가이드(인사이트) vs 함수형 프로그래밍(한빛미디어)"></p>
<ul>
<li>
<p>인사이트</p>
<ul>
<li>주로 기초 서적</li>
<li>(페이지 대비) 저렴한 가격
<ul>
<li>레퍼런스 북 위주라 두꺼운 책들</li>
</ul>
</li>
<li>출간본 그대로의 모습
<ul>
<li>작은 폰트</li>
<li>좌/우 페이지의 좌/우 여백이 다름</li>
</ul>
</li>
<li>구매시 불편함
<ul>
<li>하루 2번 배송</li>
<li>only 무통장입금</li>
</ul>
</li>
</ul>
</li>
<li>
<p>한빛미디어</p>
<ul>
<li>time to market 같은 책들
<ul>
<li>&quot;핵심적인 내용을 빠르게 전달하기 위해 조금 거칠지만 100page 내외의 전자책 전용&quot; - 소개 페이지 中</li>
</ul>
</li>
<li>eBook에 맞춘 편집
<ul>
<li>큰 폰트</li>
<li>(비교적) 적은 여백, 넓은 행간</li>
</ul>
</li>
<li>책보다는 포스팅이나 매거진 느낌
<ul>
<li>&quot;보완되고 발전된 노하우가 정리되면 구매하신 분께 무료로 업데이트&quot; - 소개 페이지 中</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>써놓고 나니 책 가격을 페이지에 비례해서 책정한다는건 무척 어리석은 일이지만 모든 책을 읽어볼 수 없으니 그냥 공개된 정보만 훑어보다가 들었던 생각이다. 어느 쪽이 더 좋은가? 어디가 더 많이 팔릴까? 라고 잠깐 생각을 해봤는데 둘 다 썩 좋은 질문은 아닌거 같다. 단순히 '편집'만 가지고 이야기를 하자면, 여백이나 행간은 한빛쪽이 확실히 읽기 좋고 폰트 자체는 인사이트쪽이 읽기 좋고, 작은 폰트는 아이패드류나 데스크탑에서 읽기 편하고 큰 폰트는 5&quot;~7&quot; 정도에서 읽기 편하다. (그 이하의 화면 크기는 PDF 자체가 읽기 불편하다.) 책 종류 자체도 인사이트는 기본서(혹은 레퍼런스)같은 느낌이고 한빛은  실용서(혹은 노하우)같은 느낌이다. 둘 다 필요한 종류의 책들.</p>
<p>비교 이외의 한가지 토픽을 더 던지자면, DRM-free에 대한 정보가 더 없나 검색하다가 &quot;<a target="_blank" rel="noopener" href="http://www.hanb.co.kr/network/view.html?bi_id=1821">DRM으로부터의 해방, 영원히</a>&quot;라는 글을 읽었다. 사실 eBook이 유행하기 전에도 어둠의 경로로는 만화/소설/잡지 등의 스캔이 떠돌고 있었고 여전히 그렇다. 이런 상황에서 DRM이 없어지면 '무단 복제'가 더 빈번해질까? 판매량이 더 감소할까? 저 링크 속의 글에 있는 &quot;이해할 수 없는 것은, 책 판매량은 줄지 않았다는 것이다. 사실, 판매량은 그 해에 살짝 올라갔다.&quot;라는 말이 한국의 실정에도 적용될 수는 없더라도 그 의미를 같이 하지 않을까. 그렇기에 인사이트나 한빛미디어에서도 이런 도전을 하고 있는 것이겠고, 그것을 응원한다 :)</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/drm-free/" class="post__tag__link">drm-free</a></li><li class="post__tag__item"><a href="/tags/eBook/" class="post__tag__link">eBook</a></li><li class="post__tag__item"><a href="/tags/인사이트/" class="post__tag__link">인사이트</a></li><li class="post__tag__item"><a href="/tags/한빛미디어/" class="post__tag__link">한빛미디어</a></li></ul><a href="/2012/09/26/comparison-with-drm-free-ebook-publishers/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2012-09-19T09:32:00.000Z" class="post__time">September 19, 2012</time><h1 class="post__title"><a href="/2012/09/19/10-good-reasons-use-coffeescript/">커피스크립트를 쓰면 좋은 10가지 이유</a></h1></header><div class="post__main echo"><blockquote>
<h3>Translation of &quot;<a target="_blank" rel="noopener" href="http://www.netmagazine.com/features/10-good-reasons-use-coffeescript">10 good reasons to use CoffeeScript</a>&quot; into Korean, under the same license as the original.</h3>
</blockquote>
<p>Caike souza는 CoffeeScript의 어떤 점들이 좋은지, 왜 이게 프로젝트에서 쓰일만한지에 대해 보여줄 것이다.</p>
<p>커피스크립트는 최근에 만들어진 인기있는 언어다. 커피스크립트는 자바스크립트의 강력한 객체 모델을 훨씬 간단한 문법으로 사용할 수 있을 뿐만 아니라 이미 존재하는 특징들 또한 쓸 수 있다. 여전히 커피스크립트가 배울만하다고 생각한다면, 내 대부분의 프로젝트에서 왜 쓰고 있는 10가지 이유들을 보자.</p>
<h1>1. 깔끔한 문법</h1>
<p>C언어의 문법에서 강하게 영향을 받은 자바스크립트처럼이 아니라 커피스크립트의 문법은 루비와 파이썬에서 영향을 받았다. 파이썬과 루비 코드를 본 적이 있으면 커피스크립트의 문법 몇개가 친숙할 것이다. 세미콜론으로 문장을 구분하지 않고 줄 단위로, 메소드의 호출이나 조건을 쓰는데 괄호는 옵션, 공백에 민감하고, 이 모든건 훨씬 쉽게 읽기 위한 문법이다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">sayHello message</span><br></pre></td></tr></table></figure>
<h1>2. 자바스크립트의 좋은 부분만 생성</h1>
<p>자바스크립트에는 알려진 단점들이 있다. 커피스크립트는 항상 자바스크립트의 장점만을 생성하도록 최선을 다할 것이다. 한가지 예로 커피스크립트로 생성되는 모든 자바스크립트 파일은 자신의 영역(scope)를 가진다. 익명 함수로 코드를 감싸면 개발자가 이름이 충돌(naming collision)하지 않게 방지하고 전역 네임스페이스를 섞이지 않도록 해준다. 간단한 HelloWorld를 자바스크립트로 생성시킨건 다음과 같다.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> sayHello;  </span><br><span class="line">  sayHello = <span class="function"><span class="keyword">function</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(message);</span><br><span class="line">  &#125;;  </span><br><span class="line">  sayHello(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;).call(<span class="built_in">this</span>);</span><br></pre></td></tr></table></figure>
<p>위의 예시에서 <code>sayHello</code> 함수는 익명 함수 내에서만 가능하고 전역 네임스페이스에는 추가되지 않는다.</p>
<h1>3. Fat Arrow</h1>
<p>자바스크립트는 진짜 강력하고 유연한 언어다. 그러나 때론 이 특징들이 개발자가 이때문에 추가적인 코드를 쓰도록 요구한다. 커피스크립트에서는 언어 내부에서 이런걸 해결한다.</p>
<p>다음 예제에서 우리는 callback 함수의 내부에서부터 커피 객체의 context로 접근한 필요가 있다. 자바스크립트 개발자들 사이에서 널리 사용되는 규칙으로, callback 함수 외부에서 객체의 context 내부 변수로 값을 전달한다, 그래서 callback 함수로부터 참조가 되고 있어야한다, 다음 예시처럼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> coffee = &#123;</span><br><span class="line">  isFull: <span class="literal">true</span>,</span><br><span class="line">  watchDrink: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">    $(<span class="string">&#x27;.drink a&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      that.isFull = <span class="literal">false</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>이런 방법을 커피스크립트로 변환한다면 여전히 가능하다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">coffee =</span><br><span class="line">  isFull: <span class="literal">true</span></span><br><span class="line">  watchDrink: <span class="function">-&gt;</span></span><br><span class="line">    that = <span class="built_in">this</span></span><br><span class="line">    $(<span class="string">&#x27;.drink a&#x27;</span>).<span class="literal">on</span> <span class="string">&#x27;click&#x27;</span>, <span class="function">-&gt;</span></span><br><span class="line">      that.isFull = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>그러나 커피스크립트는 뚱뚱한 화살표 연산자(Fat Arrow Operation, 그냥 Fat Arrow는 원어로 표기해야겠다)로 똑같은걸 더 효과적으로 보여주는 방법이 있다. 이전의 커피스크립트 코드에서 이제 Fat Arrow를 쓰면 다음과 같다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">coffee =</span><br><span class="line">  isFull: <span class="literal">true</span></span><br><span class="line">  watchDrink: <span class="function">-&gt;</span></span><br><span class="line">    $(<span class="string">&#x27;.drink a&#x27;</span>).<span class="literal">on</span> <span class="string">&#x27;click&#x27;</span>, <span class="function">=&gt;</span></span><br><span class="line">      @isFull = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>fat arrow를 사용하면, 커피의 context 안쪽으로 @ 연산자를 거쳐 callback 함수의 안쪽으로 참조할 수 있다. 커피스크립트에서 @는 <code>this</code> 키워드 대신이지만 =&gt; 안쪽에서만 사용가능하고, context 바깥의 this를 참조한다.</p>
<h1>4. String interpolation</h1>
<p>커피스크립트의 String interpolation은 루비처럼 작동한다. 자바스크립트에서처럼 +로 합치는 것 대신에 다음과 같이 겹따옴표 내부에서 #{} 안에 표현하면 된다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;John Doe&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log <span class="string">&quot;Hi, my name is <span class="subst">#&#123;name&#125;</span>&quot;</span> </span><br></pre></td></tr></table></figure>
<h1>5. List comprehensions</h1>
<p>자바스크립트에서 엘리먼트 집합들을 하나씩 훑는 방법 중 가장 흔항 방법은 for 반복이다. 자바스크립트로 짠 for 반복의 간단한 예시다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">&#x27;Foo&#x27;</span>, <span class="string">&#x27;Bar&#x27;</span>, <span class="string">&#x27;Baz&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; names.length; i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(names[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>파이썬 세계에서 잘 알려진 list comprehension을 사용해 배열을 순회할 수 있게 해준다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">names = [<span class="string">&#x27;Foo&#x27;</span>, <span class="string">&#x27;Bar&#x27;</span>, <span class="string">&#x27;Baz&#x27;</span>]</span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="keyword">for</span> name <span class="keyword">in</span> names</span><br></pre></td></tr></table></figure>
<p>자바스크립트의 for문과는 다르게, list comprehensions는 표현식이므로 반환해서 할당할 수도 있다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">names = [<span class="string">&#x27;Foo&#x27;</span>, <span class="string">&#x27;Bar&#x27;</span>, <span class="string">&#x27;Baz&#x27;</span>]</span><br><span class="line">friends = (name <span class="keyword">for</span> name <span class="keyword">in</span> names <span class="keyword">when</span> name != <span class="string">&#x27;Bar&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1>6. Conditional modifier</h1>
<p>기본적으로 if와 unless같은 조건식을 postfix 형태로 쓸 수 있다. 아래 코드를 읽어보면 그냥 영어 문장을 읽는 것같이 들릴 것이다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">allowEntrance() <span class="keyword">unless</span> age &lt; <span class="number">21</span></span><br><span class="line">allowEntrance() <span class="keyword">if</span> age &gt;= <span class="number">21</span></span><br></pre></td></tr></table></figure>
<h1>7. the class keyword</h1>
<p>자바스크립트는 prototype의 객체지향언어라서 클래스 선언에 대한 내부적인 지원은 없다. 그러나 커피스크립트는 지원한다. 컴파일러가 자바스크립트 코드로 적당히 표현되게 필요한 해석들을 잘 해준다. 커피스크립트에서의 클래스는 아래처럼 쓸 수 있다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span>  </span></span><br><span class="line">  constructor: <span class="function"><span class="params">(@name)</span> -&gt;</span>  </span><br><span class="line"> </span><br><span class="line">  brew: <span class="function">-&gt;</span></span><br><span class="line">    <span class="built_in">console</span>.log <span class="string">&#x27;Brewing&#x27;</span></span><br><span class="line"> </span><br><span class="line">  description: <span class="function">-&gt;</span></span><br><span class="line">    <span class="built_in">console</span>.log <span class="string">&quot;Coffee is <span class="subst">#&#123;@name&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>커피스크립트 클래스에서 객체를 만드는 방법은 자바스크립트에서 new 연산자를 통해 생성자 함수를 호출해서 만드는 방법과 완전히 똑같다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frenchCoffee = <span class="keyword">new</span> Coffee(<span class="string">&#x27;French&#x27;</span>)</span><br></pre></td></tr></table></figure>
<ol start="8">
<li>전망</li>
</ol>
<p>자바스크립트의 창시자인 Brendan Eich처럼 자바스크립트 커뮤니티의 주요한 사람들이 커피스크립트 문법 표준화를 하고 있다. class 키워드를 통한 prototype 상속 같은 것들, @ 연산자나 =&gt;같은 것들은 실제로 몇년 안에 자바스크립트에 들어갈 것이다.</p>
<blockquote>
<p>&quot;커피스크립트의 class, super, @같은 문법적인 좋은 것들로 prototype의 상속을 표준화시키려고 열심히 만들고 있다&quot;</p>
</blockquote>
<p class="right">- 자바스크립트의 창시자, Brendan Eich</p>
<h1>9. 커뮤니티 전파</h1>
<p>RoR 3.1 버전부터 커피스크립트를 out-of-the-box(바로 쓸 수 있게끔) 지원하기 시작했다. 파이썬이나 PHP같은 다른 언어의 Web Framework들은 컴파일 단계를 지원하는 서드파티 라이브러리들을 갖고 있다. 또 많은 유닛 테스트 프레임워크들이 커피스크립트를 지원하기에 커뮤니티들이 활발히 포용하고 있다.</p>
<h1>10. 배우기 좋은 자원들</h1>
<p>커피스크립트 공식 웹사이트는 훌륭한 문서와 바로 돌려볼 수 있는 예제들을 제공한다. 언어가 어떻게 만들어졌는지 자세하게 파볼 사람들을 위해 소스코드 또한 웹사이트에 잘 문서화되어있고 읽을 수 있다. 더 배울 수 있도록 많은 온라인 강좌, 책, 전자책, 블로그 포스팅들이 있다. CodeSchool.com은 입문할 수 있는 무료 커피스크립트 강좌가 있는 곳이다.</p>
<hr>
<p>이것들 덕분에 커피스크립트에 더 관심을 갖게 되었다. 이 글이 커피스크립트가 배울 가치가 있는 언어인지에 대한 토론하는데 도움이 되길 바란다.</p>
<style type="text/css">
.right {text-align: right;}
</style></div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/coffeescript/" class="post__tag__link">coffeescript</a></li></ul><a href="/2012/09/19/10-good-reasons-use-coffeescript/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2012-09-12T12:52:00.000Z" class="post__time">September 12, 2012</time><h1 class="post__title"><a href="/2012/09/12/coding-interview-p215-18-10/">코딩 인터뷰 완전 분석 215쪽 문제 18.10 풀이</a></h1></header><div class="post__main echo"><blockquote>
<p>사전에 등장하고 길이가 같은 두 단어가 주어졌을 때, 한 번에 글자 하나만 바꾸어 한 단어를 다른 단어로 변환하는 프로그램을 작성하라. 변환 과정에서 만들어지는 각 단어도 사전에 있는 단어여야 한다.
[실행 예]
input : DAMP, LIKE
output: DAMP -&gt; LAMP -&gt; LIMP -&gt; LIME -&gt; LIKE
[사전 데이터]
네 글자 단어 - <a target="_blank" rel="noopener" href="http://www.insightbook.co.kr/wp-content/uploads/2012/09/word4.txt">word4</a>
다섯 글자 단어 - <a target="_blank" rel="noopener" href="http://www.insightbook.co.kr/wp-content/uploads/2012/09/word5.txt">word5</a></p>
</blockquote>
<blockquote>
<p>[심화 문제 - 풀지 않아도 됩니다]
심화문제 1: 가장 적은 수의 단어를 써서 변환하도록 프로그램을 작성해봅시다.
심화문제 2: 가장 많은 수의 단어를 써서 변환하도록 프로그램을 작성해봅시다. 단, 변환 과정에서 같은 단어가 두 번 나오면 안됩니다.</p>
</blockquote>
<p>가장 단순한 접근.
모든 데이터를 메모리에 올려놓고, 앞에서부터 한글자씩 대입해서 사전에서 검색해보고 있으면 치환. 목적지에 도착할 때까지 반복. 혹시 한바퀴(문자열 길이)를 돌 때까지 치환할 단어가 없으면 찾을 수 없다고 판단. 일종의 Greedy로 답을 찾을 수는 있지만 가장 빠른 답인지 보장하지는 못한다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># synonym.coffee</span></span><br><span class="line">v = process.argv</span><br><span class="line"><span class="keyword">if</span> v.length &lt; <span class="number">5</span></span><br><span class="line">    process.exit <span class="number">-1</span></span><br><span class="line">n = <span class="built_in">parseInt</span> v[<span class="number">3</span>]</span><br><span class="line">src = v[<span class="number">4</span>].toLowerCase()</span><br><span class="line">dst = v[<span class="number">5</span>].toLowerCase()</span><br><span class="line"></span><br><span class="line">data = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).readFileSync <span class="string">&#x27;./word&#x27;</span> + n + <span class="string">&#x27;.txt&#x27;</span></span><br><span class="line">data = data.toString().split <span class="string">&#x27;\n&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> data.indexOf(dst) <span class="keyword">is</span> <span class="number">-1</span></span><br><span class="line">    <span class="built_in">console</span>.log <span class="string">&#x27;dst does not exist in data text&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log src</span><br><span class="line"><span class="keyword">while</span> src <span class="keyword">isnt</span> dst</span><br><span class="line">    __ = src</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0.</span>..n]</span><br><span class="line">        temp = src.substring(<span class="number">0</span>, i) + dst.charAt(i) + src.substring(i+<span class="number">1</span>,n)</span><br><span class="line">        <span class="keyword">if</span> __ <span class="keyword">isnt</span> temp <span class="keyword">and</span> data.indexOf(temp) <span class="keyword">isnt</span> <span class="number">-1</span></span><br><span class="line">            src = temp</span><br><span class="line">            <span class="built_in">console</span>.log <span class="string">&quot;-&gt; <span class="subst">#&#123;src&#125;</span>&quot;</span></span><br><span class="line">            <span class="keyword">if</span> src <span class="keyword">is</span> dst <span class="keyword">then</span> <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> __ <span class="keyword">is</span> src</span><br><span class="line">        <span class="built_in">console</span>.log <span class="string">&quot;IMPOSSIBLE&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>그리고 출력값</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>coffee synonym.coffee <span class="number">4</span> damp like</span><br><span class="line">damp</span><br><span class="line">-&gt; lamp</span><br><span class="line">-&gt; limp</span><br><span class="line">-&gt; lime</span><br><span class="line">-&gt; like</span><br></pre></td></tr></table></figure>
<p>소스에서는 생략했지만, 6회(두번째 루프) 만에 찾았다.</p>
<p>Shorted Path나 Longest Path를 찾기 위해서는 edge에 index 정보를 기록하는 graph를 만들어야할꺼 같은데, 그러려면 모델링하는데만 O(n^2)만큼의 시간이 걸린다.</p>
<p>좀 더 좋은 방법을 찾아보자.</p>
</div><footer class="post__foot u-cf"><a href="/2012/09/12/coding-interview-p215-18-10/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2012-09-05T12:51:00.000Z" class="post__time">September 5, 2012</time><h1 class="post__title"><a href="/2012/09/05/coding-interview-p210-17.3-modified/">코딩 인터뷰 완전 분석 210쪽 17.3 변형 문제 풀이</a></h1></header><div class="post__main echo"><blockquote>
<p>자연수 n을 입력받고, n!의 계산 결과 중 마지막에 붙은 연속된 0의 개수와 연속된 0 바로 앞에 나오는 숫자를 구하라.</p>
</blockquote>
<blockquote>
<p>[실행 예]
input n: 15
output: 3 8</p>
</blockquote>
<blockquote>
<p>[설명]
15!은 1307674368000이므로, 마지막에 연속된 0은 3개이고, 바로 앞의 숫자는 8이다.</p>
</blockquote>
<blockquote>
<ul>
<li>조건 *</li>
</ul>
</blockquote>
<blockquote>
<p>n의 범위는 1 이상, 10000 이하입니다.
테스트 입력은 다음과 같습니다.
20! = 2432902008176640000
30! = 265252859812191058636308480000000
40! = 815915283247897734345611269596115894272000000000
50! = 30414093201713378043612608166064768844377641568960512000000000000
100! = 93326215443944152681699238856266700490715968264381621468592963
8952175999932299156089414639761565182862536979208272237582511852
10916864000000000000000000000000
프로그래밍 언어에서 제공하는 자릿수 제한 없는 곱셈을 이용하거나, 이런 형태의 곱셈 함수를 직접 구현해도 답을 얻을 수 있지만, 문제의 의도와는 다릅니다.
정답 검토의 편의를 위해 블로그 포스팅에 2012!와 10000!의 결과를 남겨주세요.
(심화 문제) 연속된 0 앞에 나오는 여러 숫자를 구하는 것도 가능하니, 심심하신 분은 도전해보세요. ^^</p>
</blockquote>
<h3>1. Simple Approach</h3>
<p>아주 간단하게 생각해서 굳이 다 계산할 필요없이 마지막 원하는 자릿수만 남겨보자.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># simple.factorial.coffee</span></span><br><span class="line">n = <span class="number">1</span></span><br><span class="line">k = <span class="number">3</span></span><br><span class="line">N = <span class="number">2012</span></span><br><span class="line">digit = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">digit = digit * <span class="number">10</span> <span class="keyword">while</span> k-- <span class="keyword">isnt</span> <span class="number">0</span></span><br><span class="line">zero = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1.</span>.N]</span><br><span class="line">    n = n*i</span><br><span class="line">    <span class="keyword">while</span> n % <span class="number">10</span> <span class="keyword">is</span> <span class="number">0</span></span><br><span class="line">        n = n/<span class="number">10</span></span><br><span class="line">        zero++</span><br><span class="line"></span><br><span class="line">    n = n%digit</span><br><span class="line">    <span class="built_in">console</span>.log <span class="string">&quot;<span class="subst">#&#123;i&#125;</span>! = ...<span class="subst">#&#123;n&#125;</span>*10^<span class="subst">#&#123;zero&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>k는 원하는 자리 수. 3자리만 끊어서 보도록 했다. 결과는</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">2012</span>! = ...<span class="number">928</span>*<span class="number">10</span>^<span class="number">501</span></span><br><span class="line">[Finished in 0.7s]</span><br></pre></td></tr></table></figure>
<h3>2. without 2, 5</h3>
<p>0의 개수를 결정하는 2와 5는 따로 처리한다. N까지 숫자를 모두 곱해서 소인수분해를 하면 2가 5보다 항상 클까? non-zero digit of factorial로 검색하니 바로 맨 위에 이 <a target="_blank" rel="noopener" href="http://comeoncodeon.wordpress.com/2009/06/20/lastnon-zero-digit-of-factorial/">포스팅</a>이 나왔다. Approach1은 누구나 생각할 수 있고 2에 대한 수학적인 증명이 있어야할텐데 그건 차차 생각해보도록 하고 일단 구현해보도록 했다.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#reduce2and5.factorial.coffee</span></span><br><span class="line">n = <span class="number">1</span></span><br><span class="line">k = <span class="number">3</span></span><br><span class="line">N = <span class="number">2012</span></span><br><span class="line"></span><br><span class="line">digit = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> k-- <span class="keyword">isnt</span> <span class="number">0</span></span><br><span class="line">    digit = digit * <span class="number">10</span></span><br><span class="line"></span><br><span class="line">zero = <span class="number">0</span></span><br><span class="line">n2 = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1.</span>.N]</span><br><span class="line">    j = i</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> j % <span class="number">10</span> <span class="keyword">is</span> <span class="number">0</span></span><br><span class="line">        j /= <span class="number">10</span></span><br><span class="line">        zero++</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> j % <span class="number">2</span> <span class="keyword">is</span> <span class="number">0</span></span><br><span class="line">        j /= <span class="number">2</span></span><br><span class="line">        n2++</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> j % <span class="number">5</span> <span class="keyword">is</span> <span class="number">0</span></span><br><span class="line">        j /= <span class="number">5</span></span><br><span class="line">        n2--</span><br><span class="line">        <span class="built_in">console</span>.error i <span class="keyword">if</span> n2 <span class="keyword">is</span> <span class="number">0</span></span><br><span class="line">        zero++</span><br><span class="line"></span><br><span class="line">    n = n*j % digit</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> n2-- <span class="keyword">isnt</span> <span class="number">0</span></span><br><span class="line">    n = n*<span class="number">2</span> % digit</span><br><span class="line"><span class="built_in">console</span>.log <span class="string">&quot;<span class="subst">#&#123;N&#125;</span>! = ...<span class="subst">#&#123;n&#125;</span>*10^<span class="subst">#&#123;zero&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>결과는</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">2012</span>! = ...<span class="number">928</span>*<span class="number">10</span>^<span class="number">501</span></span><br><span class="line">[Finished in 0.2s]</span><br></pre></td></tr></table></figure>
<p>확실하게 줄었다. Approach3과 4에 대해서는 더 생각해봐야겠는데 일단 카페 마감 시간이라 나가도록 하겠다.</p>
</div><footer class="post__foot u-cf"><a href="/2012/09/05/coding-interview-p210-17.3-modified/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2021 Seoh Char</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/page/2/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/page/4/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>