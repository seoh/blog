<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="most opinionated blog"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/blog/rss.xml" title="devthewild" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>ES7의 함수 bind 문법 - devthewild</title><link rel="stylesheet" href="/blog/css/main.css" type="text/css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/blog/">devthewild</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/blog/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/blog/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2015-06-10T17:02:01.000Z" class="post__time">11th Jun, 2015</time><h1 class="post__title"><a href="/blog/2015/06/11/function-bind-syntax/">ES7의 함수 bind 문법</a></h1></header><div class="post__main echo"><p>어제 @wesbos가 <code>.bind()</code>를 사용한 <code>querySelector</code> 단축에 대한 js 소스를 캡쳐한 <a href="https://twitter.com/wesbos/status/608341616173182977" target="_blank" rel="external">트윗</a>을 올렸다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 선택된 첫번째 엘리먼트 - $('input[name="food"]')</span></span><br><span class="line"><span class="keyword">var</span> $ = <span class="built_in">document</span>.querySelector.bind(<span class="built_in">document</span>);</span><br><span class="line"><span class="comment">// 선택된 엘리먼트들의 배열 - $('img.dog')</span></span><br><span class="line"><span class="keyword">var</span> $$ = <span class="built_in">document</span>.querySelectorAll.bind(<span class="built_in">document</span>)</span><br></pre></td></tr></table></figure>
<p>여기에 @paul_irish가 비슷한 컨셉으로 이벤트 등록까지 할 수 있는 <a href="https://gist.github.com/paulirish/12fb951a8b893a454b32" target="_blank" rel="external">bling.js</a>를 <a href="https://twitter.com/paul_irish/status/608433593061376003" target="_blank" rel="external">리플</a>로 남겼다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Node.prototype.on = <span class="built_in">window</span>.on = <span class="function"><span class="keyword">function</span>(<span class="params">name, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.addEventListener(name, fn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 이하 생략</span></span><br></pre></td></tr></table></figure>
<p>이런 @thejameskyle가 흥미로운 <a href="https://twitter.com/thejameskyle/status/608438113703182338" target="_blank" rel="external">리플</a>로 <a href="http://t.co/dQFFJHYZtZ" target="_blank" rel="external">이런 소스</a>를 남겼다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> $ = ::<span class="built_in">document</span>.querySelector;</span><br><span class="line"><span class="keyword">let</span> find = Element.prototype.querySelectorAll;</span><br><span class="line"><span class="keyword">let</span> each = <span class="built_in">Array</span>.prototype.forEach;</span><br><span class="line"><span class="keyword">let</span> on = Node.prototype.addEventListener;</span><br><span class="line"><span class="comment">// 이하 생략</span></span><br></pre></td></tr></table></figure>
<p>생소한 문법이 등장했다. <code>::</code>는 어떤 의미일까?</p>
<hr>
<p>예전에 봤던 reactjs로 ES6를 접한 사람들이 하는 오해에 대한 글, <a href="https://reactjsnews.com/es6-gotchas/" target="_blank" rel="external">ES6 Gotchas</a>가 생각났다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onClick=&#123;<span class="keyword">this</span>.handleClick&#125; /&gt;</span><br></pre></td></tr></table></figure>
<p>이게 사실은</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line">export default class ComponentName extends React.Component &#123;</span><br><span class="line">  constructor()&#123;</span><br><span class="line">    super()</span><br><span class="line">    this.handleClick = this.handleClick.bind(this)</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>이런 식으로 <code>this.handleClick</code>을 그대로 넘기는게 아니라 자동으로 bind해서 넘겨주는걸 react에서 해주기 때문에 사람들이 오해하기 쉽다는 뜻이다.
babel에서는 (소위 ES7이라 부르는)실험 기능을 활성화할 수도 있는데, 그 중 데코레이터에 <a href="https://github.com/andreypopp/autobind-decorator" target="_blank" rel="external">autobind decorator</a>를 붙일 수도 있다.
<code>@autobind</code>를 메소드 혹은 함수 위에 붙이면 react처럼 bind해주는 기능을 한다. 그런데 이게 마음에 안 찼는지 <a href="https://github.com/zenparsing/es-function-bind" target="_blank" rel="external">함수 Bind 문법</a>이라는 제안이
나왔고, babel에도 <a href="http://babeljs.io/blog/2015/05/14/function-bind/" target="_blank" rel="external">추가</a>되었으며 자세한 설명된 <a href="http://blog.jeremyfairbank.com/javascript/javascript-es7-function-bind-syntax/" target="_blank" rel="external">포스팅</a>도 올라왔다. 위에 'ES6 Gotchas' 댓글에서 예제 소스를 빌려오자면,</p>
<ol>
<li><code>::a.b</code>는 <code>a::a.b</code>와 같다.</li>
<li><code>a::b.c</code>는 <code>b.c.bind(a)</code>와 같다.</li>
<li>그러므로 <code>::a.b</code>는 <code>a.b.bind(a)</code>와 같다.</li>
</ol>
<p>이제 다시 처음 소스의 <code>::document.querySelector</code>를 풀어보자면 <code>document.querySelector.bind(document)</code>라는 것을 알 수 있다.</p>
<hr>
<p>ES6/ES7(이제는 ES2015 or after라고 부르지만)에 대한 이야기를 자주 하는 이유는 재미있고 내가 관심 있는 분야라서도 그렇지만,
이런 기술들은 나 혼자 편하다고 해서 쓸 수 있는 것이 아니다. 같이 일하는 사람들이 필요성에 대해 공감하고 익숙해야 쓸 수 있다.
그래서 보다 많은 사람들이 관심을 가지고 익숙해졌으면하는 바람이 있다. (물론 나는 현재 무직이라 같이 일하는 사람이 없지만 나중을 위해)</p>
<p>JavaScript라는 언어의 문법 자체는 심플한 편이지만, 거지같은 실행환경 때문에 <code>this</code>가 뭐냐 언제 결정되느냐는 질문을 하도 많이 받아서
<a href="http://devthewild.tumblr.com/post/73112749480/var-that-this" target="_blank" rel="external">&quot;var that = this&quot; 같은 자바스크립트 스코프에 대한 이해</a>라는
StackOverflow의 답변을 번역해 글을 쓴 적도 있다. 어차피 웹이라는 거대한 플랫폼에서 자유로운 개발자는 많지 않고, 발을 디딘 사람들 중 대부분은 프론트를 한 번쯤 만지게 된다.
피할 수 없다고 즐기는 건 변태지만, 최대한 생산성을 높여서 괴로움을 줄이길 바란다.</p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/blog/tags/ES7/" class="post__tag__link">ES7</a></li><li class="post__tag__item"><a href="/blog/tags/babel/" class="post__tag__link">babel</a></li></ul><a href="https://github.com/seoh/blog/tree/master/source/_posts/function-bind-syntax.md" class="post__foot-link u-fr">Pull Request</a><a href="https://github.com/seoh/blog/issues/new" class="post__foot-link u-fr">Tell me</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2015 Seoh Char</div><menu class="page-menu u-fr"><li class="page-menu__item"><span title="Previous" class="page-menu__link icon-arrow-left page-menu__link--disabled"></span></li><li class="page-menu__item"><a title="Next" href="/blog/2015/06/10/big-data-with-spark-1-2-week/" class="page-menu__link icon-arrow-right"></a></li></menu></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
e=o.createElement(i);r=o.getElementsByTagName(i)[0];
e.src='//www.google-analytics.com/analytics.js';
r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
ga('create','UA-52090105-1');ga('send','pageview');
</script></body></html>